5.1 Атрибуты и  методы объекта
Задача "Developer - не только разработчик":
Реализуйте класс House, объекты которого будут создаваться следующим образом:
House('ЖК Эльбрус', 30)
Объект этого класса должен обладать следующими атрибутами:
self.name - имя, self.number_of_floors - кол-во этажей
Также должен обладать методом go_to(new_floor), где new_floor - номер этажа(int), на который нужно приехать.
Метод go_to выводит на экран(в консоль) значения от 1 до new_floor(включительно).
Если же new_floor больше чем self.number_of_floors или меньше 1, то вывести строку "Такого этажа не существует".
Пункты задачи:
Создайте класс House.
Вунтри класса House определите метод __init__, в который передадите название и кол-во этажей.
Внутри метода __init__ создайте атрибуты объекта self.name и self.number_of_floors, присвойте им переданные значения.
Создайте метод go_to с параметром new_floor и напишите логику внутри него на основе описания задачи.
Создайте объект класса House с произвольным названием и количеством этажей.
Вызовите метод go_to у этого объекта с произвольным числом.
Пример результата выполнения программы:
Исходные данные:
h1 = House('ЖК Горский', 18)
h2 = House('Домик в деревне', 2)
h1.go_to(5)
h2.go_to(10)
Вывод на консоль:
1
2
3
4
5
"Такого этажа не существует"
Примечания:
self - это переменная указывающая на объект. Используйте её для обращения к атрибутам или методам объекта.
Обращение к атрибутам или методам объекта/класса происходит при помощи "."
Метод __init__ вызывается в момент создания объекта.


5.2 Задача "Магические здания":
Для решения этой задачи будем пользоваться решением к предыдущей задаче.
Необходимо дополнить класс House следующими специальными методами:
__len__(self) - должен возвращать кол-во этажей здания self.number_of_floors.
__str__(self) - должен возвращать строку: "Название: <название>, кол-во этажей: <этажи>".
Пример результата выполнения программы:
Пример выполняемого кода:
h1 = House('ЖК Эльбрус', 10)
h2 = House('ЖК Акация', 20)
# __str__
print(h1)
print(h2)
# __len__
print(len(h1))
print(len(h2))
Вывод на консоль:
Название: ЖК Эльбрус, кол-во этажей: 10
Название: ЖК Акация, кол-во этажей: 20
10
20


5.3
Цель: применить знания о перегрузке арифметических операторов и операторов сравнения.



Задача "Нужно больше этажей":

Для решения этой задачи будем пользоваться решением к предыдущей задаче "Специальные методы класса".



Необходимо дополнить класс House следующими специальными методами:

__eq__(self, other) - должен возвращать True, если количество этажей одинаковое у self и у other.
Методы __lt__(<), __le__(<=), __gt__(>), __ge__(>=), __ne__(!=) должны присутствовать в классе и возвращать результаты сравнения по соответствующим операторам. Как и в методе __eq__ в сравнении участвует кол-во этажей.
__add__(self, value) - увеличивает кол-во этажей на переданное значение value, возвращает сам объект self.
__radd__(self, value), __iadd__(self, value) - работают так же как и __add__ (возвращают результат его вызова).
Остальные методы арифметических операторов, где self - x, other - y:



Следует заметить, что other может быть не только числом, но и вообще любым объектом другого класса.

Для более точной логики работы методов __eq__, __add__  и других методов сравнения и арифметики перед выполняемыми действиями лучше убедиться в принадлежности к типу при помощи функции isinstance:

isinstance(other, int) - other указывает на объект типа int.

isinstance(other, House) - other указывает на объект типа House.



Пример результата выполнения программы:

Пример выполняемого кода:

h1 = House('ЖК Эльбрус', 10)

h2 = House('ЖК Акация', 20)



print(h1)

print(h2)



print(h1 == h2) # __eq__



h1 = h1 + 10 # __add__

print(h1)

print(h1 == h2)



h1 += 10 # __iadd__

print(h1)



h2 = 10 + h2 # __radd__

print(h2)



print(h1 > h2) # __gt__

print(h1 >= h2) # __ge__

print(h1 < h2) # __lt__

print(h1 <= h2) # __le__

print(h1 != h2) # __ne__



Вывод на консоль:

Название: ЖК Эльбрус, кол-во этажей: 10

Название: ЖК Акация, кол-во этажей: 20

False

Название: ЖК Эльбрус, кол-во этажей: 20

True

Название: ЖК Эльбрус, кол-во этажей: 30

Название: ЖК Акация, кол-во этажей: 30

False

True

False

True

False



Примечания:

Методы __iadd__ и __radd__ не обязательно описывать заново, достаточно вернуть значение вызова __add__.



5.4 
Цель: понять разницу между атрибутами объекта и класса, дополнив уже существующий класс. Применить метод __new__.



Дополнительно о работе метода __new__:

Как мы уже знаем метод __new__ вызывается перед тем, как вызовется метод __init__.

Разберёмся, как происходит передача данных между ними на следующем примере:

class Example:

  def __new__(cls, *args, **kwargs):

  print(args)

    print(kwargs)

    return object.__new__(cls)



  def __init__(self, first, second, third):

  print(first)

  print(second)

    print(third)



ex = Example('data', second=25, third=3.14)



Работа __new__:

'data' передаётся (упаковывается) в *args, т.к. это позиционный аргумент. Он будет находиться под индексом 0 как единственный элемент кортежа.
second=25 и third=3.14 передаются (упаковываются) в **kwargs т.к. это именованные аргументы. Они будут находиться под ключами 'second' и 'third' со значением 25 и 3.14 соответственно в словаре.
Передача данных из __new__ в __init__:

После того как метод __new__ отработает до конца, произойдут следующие события с параметрами __init__:

В параметр first распакуется из args единственный аргумент 'data'.
В параметр second распакуется значение под ключом с тем же названием из словаря kwargs.
В параметр third распакуется значение под ключом с тем же названием из словаря kwargs.




Задача "История строительства":

Для решения этой задачи будем пользоваться решением к предыдущей задаче "Перегрузка операторов".



В классе House создайте атрибут houses_history = [], который будет хранить названия созданных объектов.



Правильней вписывать здание в историю сразу при создании объекта, тем более можно удобно обращаться к атрибутам класса используя ссылку на сам класс - cls.

Дополните метод __new__ так, чтобы:

Название объекта добавлялось в список cls.houses_history.
Название строения можно взять из args по индексу.


Также переопределите метод __del__(self) в котором будет выводиться строка:

"<название> снесён, но он останется в истории"



Создайте несколько объектов класса House и проверьте работу методов __del__ и __new__, а также значение атрибута houses_history.



Пример результата выполнения программы:

Пример выполнения программы:

h1 = House('ЖК Эльбрус', 10)

print(House.houses_history)

h2 = House('ЖК Акация', 20)

print(House.houses_history)

h3 = House('ЖК Матрёшки', 20)

print(House.houses_history)



# Удаление объектов

del h2

del h3



print(House.houses_history)



Вывод на консоль:

['ЖК Эльбрус']

['ЖК Эльбрус', 'ЖК Акация']

['ЖК Эльбрус', 'ЖК Акация', 'ЖК Матрёшки']

ЖК Акация снесён, но он останется в истории

ЖК Матрёшки снесён, но он останется в истории

['ЖК Эльбрус', 'ЖК Акация', 'ЖК Матрёшки']

ЖК Эльбрус снесён, но он останется в истории



dop zadanie
Дополнительное практическое задание по модулю: "Классы и объекты."



Цель: Применить знания полученные в модуле, решив задачу повышенного уровня сложности.



Задание "Свой YouTube":

Университет Urban подумывает о создании своей платформы, где будут размещаться дополнительные полезные ролики на тему IT (юмористические, интервью и т.д.). Конечно же для старта написания интернет ресурса требуются хотя бы базовые знания программирования.



Именно вам выпала возможность продемонстрировать их, написав небольшой набор классов, которые будут выполнять похожий функционал на сайте.



Всего будет 3 класса: UrTube, Video, User.



Общее ТЗ:

Реализовать классы для взаимодействия с платформой, каждый из которых будет содержать методы добавления видео, авторизации и регистрации пользователя и т.д.



Подробное ТЗ:



Каждый объект класса User должен обладать следующими атрибутами и методами:

Атриубуты: nickname(имя пользователя, строка), password(в хэшированном виде, число), age(возраст, число)
Каждый объект класса Video должен обладать следующими атрибутами и методами:

Атриубуты: title(заголовок, строка), duration(продолжительность, секунды), time_now(секунда остановки (изначально 0)), adult_mode(ограничение по возрасту, bool (False по умолчанию))
Каждый объект класса UrTube должен обладать следующими атрибутами и методами:

 Атриубты: users(список объектов User), videos(список объектов Video), current_user(текущий пользователь, User)
Метод log_in, который принимает на вход аргументы: nickname, password и пытается найти пользователя в users с такими же логином и паролем. Если такой пользователь существует, то current_user меняется на найденного. Помните, что password передаётся в виде строки, а сравнивается по хэшу.
Метод register, который принимает три аргумента: nickname, password, age, и добавляет пользователя в список, если пользователя не существует (с таким же nickname). Если существует, выводит на экран: "Пользователь {nickname} уже существует". После регистрации, вход выполняется автоматически.
Метод log_out для сброса текущего пользователя на None.
Метод add, который принимает неограниченное кол-во объектов класса Video и все добавляет в videos, если с таким же названием видео ещё не существует. В противном случае ничего не происходит.
Метод get_videos, который принимает поисковое слово и возвращает список названий всех видео, содержащих поисковое слово. Следует учесть, что слово 'UrbaN' присутствует в строке 'Urban the best' (не учитывать регистр).
Метод watch_video, который принимает название фильма, если не находит точного совпадения(вплоть до пробела), то ничего не воспроизводится, если же находит - ведётся отчёт в консоль на какой секунде ведётся просмотр. После текущее время просмотра данного видео сбрасывается.
Для метода watch_video так же учитывайте следующие особенности:

Для паузы между выводами секунд воспроизведения можно использовать функцию sleep из модуля time.
Воспроизводить видео можно только тогда, когда пользователь вошёл в UrTube. В противном случае выводить в консоль надпись: "Войдите в аккаунт, чтобы смотреть видео"
Если видео найдено, следует учесть, что пользователю может быть отказано в просмотре, т.к. есть ограничения 18+. Должно выводиться сообщение: "Вам нет 18 лет, пожалуйста покиньте страницу"
После воспроизведения нужно выводить: "Конец видео"


Код для проверки:

ur = UrTube()

v1 = Video('Лучший язык программирования 2024 года', 200)

v2 = Video('Для чего девушкам парень программист?', 10, adult_mode=True)



# Добавление видео

ur.add(v1, v2)



# Проверка поиска

print(ur.get_videos('лучший'))

print(ur.get_videos('ПРОГ'))



# Проверка на вход пользователя и возрастное ограничение

ur.watch_video('Для чего девушкам парень программист?')

ur.register('vasya_pupkin', 'lolkekcheburek', 13)

ur.watch_video('Для чего девушкам парень программист?')

ur.register('urban_pythonist', 'iScX4vIJClb9YQavjAgF', 25)

ur.watch_video('Для чего девушкам парень программист?')



# Проверка входа в другой аккаунт

ur.register('vasya_pupkin', 'F8098FM8fjm9jmi', 55)

print(ur.current_user)



# Попытка воспроизведения несуществующего видео

ur.watch_video('Лучший язык программирования 2024 года!')



Вывод в консоль:

['Лучший язык программирования 2024 года']

['Лучший язык программирования 2024 года', 'Для чего девушкам парень программист?']

Войдите в аккаунт, чтобы смотреть видео

Вам нет 18 лет, пожалуйста покиньте страницу

1 2 3 4 5 6 7 8 9 10 Конец видео

Пользователь vasya_pupkin уже существует

urban_pythonist



Примечания:

Не забывайте для удобства использовать dunder(магические) методы: __str__, __repr__, __contains__, __eq__ и др. (повторить можно здесь)
Чтобы не запутаться рекомендуется после реализации каждого метода проверять как он работает, тестировать разные вариации.


Успехов!



Примечания:

Более подробно о работе метода __new__ можно узнать здесь.
В методе __new__ можно обращаться к атрибутам текущего класса при помощи параметра cls.
